<Project Sdk="Microsoft.Build.NoTargets">

  <PropertyGroup>
    <TargetFramework>net472</TargetFramework>
    <VilensTasksBasePath Condition=" '$(VilensTasksBasePath)' == '' ">$(MSBuildThisFileDirectory)..\..\publish\</VilensTasksBasePath>
    <VilensScope>Internal</VilensScope>
    <VilensBackup>false</VilensBackup>
    <VilensFeatures>All</VilensFeatures>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <MSBuildTreatWarningsAsErrors>true</MSBuildTreatWarningsAsErrors>
  </PropertyGroup>

  <Import Project="..\..\src\Vilens.MSBuild\build\Vilens.MSBuild.props" />
  <Import Project="..\..\src\Vilens.MSBuild\build\Vilens.MSBuild.targets" />

  <Target Name="PrepareTestVilens"
          BeforeTargets="CommitVilens">

    <ItemGroup>
      <TestAssemblies Include="TestAssemblies/*" />
    </ItemGroup>

    <ItemGroup>
      <TempFiles Include="Temp/*" />
    </ItemGroup>

    <Delete Files="@(TempFiles)" />
    <Copy SourceFiles="@(TestAssemblies)"
          DestinationFolder="Temp" />

    <ItemGroup>
      <IntermediateAssembly Include="Temp/*.dll" />
    </ItemGroup>

  </Target>

</Project>